## SIDEDISH

- https://github.com/codesquad-member-2020/sidedish-11

### TODO

- [x] 테이블 설계
- [x] DTO Wrapper 추가
- [x] MySQL 연결 테스트
- [x] ERD 작성
- [x] 데이터 받아와서 입력하기
- [x] 가격 관련 데이터 Integer 타입 변경
- [x] 각 카테고리 항목 별 데이터 출력해보기
- [x] 디테일 아이템 출력해보기
- [x] JDBC Template 이용 DAO 학습 및 구현
- [x] OAuth 학습 및 구현
- [ ] OAuth 로그인 후 리다이렉트
- [x] 주문하기 기능
- [x] 주문 품절 관련 기능
- [ ] 사진 url 데이터 추가하기
- [ ] 베스트 아이템 기능
- [x] 색상 추가하기
- [ ] git과 bash, crontab을 이용해서 자동 배포스크립트를 작성
- [ ] tomcat 사용 배포



### Study Keyword

- [ ] @Builder
- [ ] Aggregation
- [x] RestTemplate
- [x] HttpEntity
- [ ] @Transactional
- [ ] HttpHeaders
- [x] DTO, DAO
- [x] JDBC Template 
- [ ] JdbcTemplate.query vs. JdbcTemplate queryForObject
- [x] OAuth
- [ ] Tomcat



-----

### Daily Log

#### 0420 (월)

- 기획서 분석
- 도메인 분석
- 개발환경 구축

#### 0421 (화)

- DB 설계
- CORS config 설정
- 프로젝트 기본 구조 작성 (Global Exception Handler 등)
- 클래스 구조에 대한 생각
- DAO, DTO 학습
- 생활코딩 MySQL 시청

#### 0422 (수)

- 전체 구조에 대한 생각
- DB 재설계
- DTO 사용 Wrapping
- 프로젝트 일지 작성 (이것)

#### 0423 (목)

- OAuth 학습
- Github - OAuth 클라이언트 등록
- Github - OAuth AccessToken 받기 구현
- Github 로그인 유저 정보 Api 받기 구현
- MySQL 연동 버그 수정 (테이블에 primary_key 하나라도 없으면 에러 발생)

#### 0424 (금)

- 회고
- 기본 mock 데이터 입력
- 아이템 세부사항 (/detail/{hash}) dto 응답
- 카테고리 dto 생성

#### 0425 (토)

- 카테고리 dto에 아이템 리스트도 아이템 dto 타입에 맞게 변경
- 전체 카테고리 dto 응답 api 구현
- 카테고리의 개별 아이템 출력 버그 수정
- API 문서 및 배포일지 작성
- 상품 재고 추가
- 상품 주문 기능 추가
- 재고 품절 시 품절 뱃지 추가 기능 추가
- 뱃지 색상 응답 dto에 추가

#### 0426 (일)

- 클라이언트 요구사항 논의
- 가격 및 포인트 인티저 타입으로 변경
- 상품 디테일 응답값에 타이틀 추가
- DAO 학습
- Item dao 작성 -> 조인을 사용해서 쿼리 수 줄여보기
- 테스트 코드 작성
- Dao 존재하지 않는 데이터 조회 시 예외처리 작성
- Category dao 작성

#### 0427 (월)

- 



### 피드백

- 1주차



### 회고 (Apr 25, 2020)

이번 배민찬 프로젝트는 페어가 없이 혼자 하게 되었다. 스케쥴 관리, 기능 구현에 있어 내가 하고싶은 대로 구현하면 되기 때문에, 강의 있는 날을 제외하고는 학원에 나올 일이 별로 없을거라고 생각했다. (집에서 코드스쿼드까지는 왕복 3시간이기 때문에 이동 시간이 조금 아까웠다.)

프로젝트를 시작하고 집에서 DB 구조에 대해 생각하고, 전체 코드에 대한 구조를 생각했다. 구조가 마음에 들지는 않았지만, 생각도 안나고 설계의 늪에 빠질것 같아 너무 많은 시간을 쏟지 않고 진행하며 바꿔 나가기로 했다. 그래서 처음부터 DB 설계를 탄탄하게 하고 프로젝트를 쭉쭉 진행하는 분들을 보면 대단하다고 생각이 들었다.

하루 집에서 하고, 다시 코드스쿼드에 나갔다. 혼자하면서, 다른 사람들은 어떻게 생각할까 하고 궁금했던 점과 이해가 가지 않았던 부분들에 대해서 백엔드 동기들 여럿에게 생각을 묻고 다녔다. 결과는 기대보다 좋았다. 비슷한 고민을 하던 사람도 있었고, 좋은 의견도 많이 들을 수 있었다. 혼자 집에서 하면 이렇게 생각을 할 수 있었을까? 엄청 많은 시간이 들었겠지 라고 생각이 들었다. 그 뒤로 매일 코드스쿼드에 출근한다. 같이 하는게 재밌기도하고, 혼자 생각에 빠져 허우적거리는 것보다 물어보고 대화하며 하는게 배우는 점이 더욱 많다고 느꼈다.

회원가입부터 미세먼지, TODO 프로젝트를 주욱 진행해오면서, 새로운 용어도 많이 배우고 다양한 기술도 많이 배운거 같다. 그러다 문득 나중에 다시 봤을때 그때 그 프로젝트에서 뭐 공부하고 뭐 배웠었지? 하고 생각할 것 같았다. 실제로 요새도 당장 지난주에 구체적으로 뭐했었는지 잘 기억도 안난다.. 매일 뭔가를 배우기도하고는 핑계고, 사실 프로젝트 하기 바빠서 정리를 잘 안해서 그런 것 같다. 그래서 이번 프로젝트 부터는 기록을 하기로 했다. [프로젝트 기록](https://github.com/wooody92/notes/blob/master/spring/project/200422 sidedish.md) 을 만들었고 나중에 누군가 그 프로젝트 때 뭐했어요? 라고 물어보면 대답 할 수 있도록 그때의 생각들을 적어 놓으려고 한다.

노트에는 미뤄놓은 학습 키워드들이 아직 산더미처럼 쌓여있다. 계속 뭔가 학습해야할게 생겨서 스택처럼 이전에 미뤄두었던 키워드들은 뭔가 쌓여가기만 한다. 그래도 아직은 그냥 이렇게 다른 걱정없이 공부만 하는게 즐겁다. 하지만 어느덧 코드스쿼드 과정도 점점 끝나간다. 다시 취업전선에 뛰어들 생각을 하니, 한번 해봐서 그런가 생각만해도 스트레스가 한가득이다. 취업준비도 알고리즘부터 차근차근 시작해야하는데 매일 이렇게 생각만하고 현실은 프로젝트 마감에 치여 아무것도 하지 못한다. 그래서 과정이 끝나갈수록 점점 걱정도 많아지는 것 같다.

인생 길게보고 초조해하지 않으려고 한다. 잘 다니던 회사를 그만두고, 아직 배우는 과정이지만, 개발자로 업종 전환 한 것만으로도 남은 인생에 있어 큰 가치가 있다고 생각한다. 그러니 지금 주어진 일에 집중하도록 하자.


-----

## 고민사항

### DTO와 OAuth

- DTO의 생성자에서 for문을 돌리는 것은 괜찮은가? -> setter vs. constructor ?
- ERD에는 DTO로 포장된 것도 그려야 할까? -> 테이블 만 저장한다.
- OAuth로 회원가입하면 액세스 구별을 위해 DB에 무슨정보가 저장될까? -> **email과 token(암호화)**

### DB

- 아이템 테이블은 하나로 하고, @Embedded를 이용하여 객체를 분야별로 나눈다. -> DTO 설계로 변경
- 의문점1 : @Embedded 1:1 관계에서 중복되는 부분은 어떻게 처리??  -> 하나 테이블로 통일 후 DTO 설계
- 의문점2 : delivery_type / badge 같이 DB에 배열로 저장할 수 없을까? 방식은?  -> DTO로 한번더 Wrapping
- 의문점3 : 카테고리 - 카드 구조에서 카드 전체 primary id로 접근하는 것과, 카테고리 id - 카드 카테고리 키로 접근하는 것중 뭐가 더 좋을까? -> JDBC에서는 하나의 aggregation root의 하나의 repository로 사용을 권장하기 때문에 후자이겠지만, 나는 전자로 진행했다. 
- 의문점4 : 데이터는 제공된 mockAPI에서 파싱해와야 하는 것 인가? 수동으로 가져와야 하는 것인가? -> RestTemplate 으로 파싱해보자
