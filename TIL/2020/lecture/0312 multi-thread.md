### 오늘의 강의

### Multi Thread

- 쓰레드는 객체이다.
- Thread.start, Thread.join
- 멀티 쓰레드 환경에서 같은 변수에 접근하면 동기화 문제가 발생할 수 있다.
  - 같은 변수 혹은 메서드 접근 시 동시에 처리할 경우 (count++에서 2씩 증가하는)
- Synchronized 를 이용하여 객체를 보호할 수 있다. (한번에 한 쓰레드만 접근가능)
- 잘못 사용하면 쓰레드가 많아질수록 속도가 현저히 느려지는 단점이 있다.
  - 설계를 잘못한다면 락 걸린 객체에서 기다리고 있기 떄문
  - 동기화 락은 쓰레드 갯수만큼 가지고 있어야 한다.
- 쓰레드가 코어 갯수보다 많아졌는데도 빨라지는 이유?
  - OS에서 좀더 할당해주기 떄문
  - 일정 쓰레드 이상이 되면, 오버헤드 발생해서 다시 느려진다.

### Web Server

- 서버의 대기소켓(listen)에 클라이언트 소켓과 연결이 되면 새 서버소켓(accept)을 생성한다.
- fork를(복사 후 가져오기) 이용하여 멀티 프로세스 웹 서버를 구축한다.
  - Child 프로세스를 생성한다.
  - 한명 이상의 클라이언트를 동시에 처리하기 위해서
  - 프로세스 많아질수록 오버헤드 발생할 수 있다.
- 소켓을 매개변수로하여 멀티 쓰레드 방식을 이용할 수 있다.
- 스프링도 사용자 요청에 따라 멀티 쓰레드 방식으로 동작한다.
